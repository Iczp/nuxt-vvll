---
name: websocket
title: WebSocket
icon: icon-park:round-socket
description: WebSocket 是一种现代化的网络通信协议，通过建立持久连接和全双工通信，实现了低延迟、高效率和实时性的数据传输。它在多种应用场景中广泛应用，为实时数据交换提供了有效的解决方案，成为许多实时应用程序的重要组成部分。
---


:Icon{name=icon-park:round-socket .size-32}

WebSocket 是一种在单个 TCP 连接上进行全双工通信的网络协议，它允许客户端和服务器之间进行实时数据传输。WebSocket 解决了传统的 HTTP 协议在通信效率和实时性方面的限制，特别适用于需要频繁数据交换和实时更新的应用场景。以下是对 WebSocket 的详细介绍：

### 特点和优势

1. **全双工通信**：
   WebSocket 通过在客户端和服务器之间建立持久连接，实现了全双工通信，即客户端和服务器可以同时发送和接收数据，而无需每次通信都建立新的连接。

2. **低延迟和高效性**：
   由于建立了持久连接，WebSocket 可以实现较低的延迟，避免了传统的 HTTP 请求和响应模型中频繁建立和关闭连接的开销，从而提高了通信效率。

3. **跨域支持**：
   WebSocket 支持跨域通信，即在不同的域名下的客户端和服务器之间也可以建立连接和进行数据交换，而不受同源策略的限制。

4. **实时性和即时更新**：
   WebSocket 适用于需要实时数据传输的应用场景，如即时通讯、实时位置跟踪、在线游戏、股票市场数据更新等，可以实时推送数据给客户端，实现即时更新。

5. **支持多种应用协议**：
   WebSocket 协议本身是一个通用的协议，不限于特定的应用领域，因此可以支持多种应用的实时通信需求。

### WebSocket 的工作原理

1. **握手阶段**：
   - 客户端通过 HTTP 或 HTTPS 发起 WebSocket 握手请求，请求头中包含特定的 Upgrade 和 Connection 字段，告知服务器希望升级到 WebSocket 协议。
   - 服务器收到请求后，如果支持 WebSocket，会返回状态码 101 Switching Protocols，表示升级成功，此时连接升级为 WebSocket。

2. **数据传输阶段**：
   - 客户端和服务器之间的连接升级后，可以直接通过发送数据帧（frame）进行通信，数据帧可以是文本帧、二进制帧或控制帧。
   - 客户端和服务器都可以发送数据帧，并且数据帧可以包含应用层协议的数据。

3. **连接关闭阶段**：
   - 客户端或服务器可以发送关闭帧（close frame）来关闭连接，关闭帧包含关闭状态码和可选的关闭原因。

### WebSocket 和 HTTP 的区别

- **连接方式**：
  - HTTP 是一种请求-响应协议，每次请求都需要建立新的连接，请求结束后即关闭连接。
  - WebSocket 建立一次连接后保持持久连接状态，客户端和服务器可以随时进行数据交换。

- **通信效率**：
  - HTTP 在每次请求时都需要重新建立连接和传输头部信息，效率较低。
  - WebSocket 通过持久连接和数据帧传输，可以实现低延迟和高效率的通信。

- **实时性**：
  - HTTP 通常不适用于需要实时数据传输的应用场景。
  - WebSocket 适用于实时性要求高的应用，可以实时推送数据给客户端。

### WebSocket 的应用场景

1. **即时通讯和聊天应用**：如在线聊天室、社交应用中的实时消息传递。
   
2. **实时位置跟踪**：如地图应用中的实时位置更新和导航信息推送。

3. **在线游戏**：支持实时多人游戏中的数据传输和状态同步。

4. **金融市场**：如股票交易平台中的实时股价更新和交易通知。

5. **监控和控制系统**：如实时监控系统中的数据传输和告警通知。

### 总结

WebSocket 是一种现代化的网络通信协议，通过建立持久连接和全双工通信，实现了低延迟、高效率和实时性的数据传输。它在多种应用场景中广泛应用，为实时数据交换提供了有效的解决方案，成为许多实时应用程序的重要组成部分。